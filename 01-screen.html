<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>大画面モニター - 背景色連動</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: "Hiragino Sans", "Meiryo", sans-serif;
            overflow: hidden;
            transition: background-color 0.5s; /* 背景色が変わる時のアニメーション */
            background-color: #000;
            color: #fff;
            cursor: pointer; /* クリックできることを示す */
        }

        #monitor-container {
            text-align: center;
            width: 95%;
            z-index: 10;
        }

        #action-label {
            font-size: 8vw;
            margin-bottom: 2vh;
            display: block;
            font-weight: bold;
            text-shadow: 2px 2px 10px rgba(0,0,0,0.5);
        }

        #name-label {
            font-size: 20vw;
            font-weight: 900;
            display: block;
            line-height: 1;
            text-shadow: 2px 2px 20px rgba(0,0,0,0.5);
        }

        /* --- 動画を完全に隠す設定 --- */
        #player-wrapper {
            position: absolute;
            top: -1000px; /* 画面の外に飛ばす */
            left: -1000px;
            width: 1px;
            height: 1px;
            overflow: hidden;
        }

        /* 背景色パターン（背景を明るくする場合、文字を黒にする調整も自動化） */
        .bg-red { background-color: #ff4d4d; color: #fff; }
        .bg-blue { background-color: #3399ff; color: #fff; }
        .bg-green { background-color: #28a745; color: #fff; }
        .bg-orange { background-color: #fd7e14; color: #fff; }
        .bg-purple { background-color: #6f42c1; color: #fff; }
        .bg-black { background-color: #000; color: #fff; }
    </style>
</head>
<body onclick="togglePlay()">

    <div id="monitor-container">
        <div id="status-msg" style="font-size: 2vw; position: fixed; top: 10px;">画面クリックで再生/一時停止</div>
        <span id="action-label">待機中</span>
        <span id="name-label">READY</span>
    </div>
    
    <div id="player-wrapper">
        <div id="player"></div>
    </div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        // myDataは 01.html のものをここに貼り付けてください
        const myData = [
            ["00:00", "歌詞...", "色①、るな・みゆ"],
            ["00:26", "歌詞...", "スプレー準備、あん・さき"],
            ["01:30", "歌詞...", "大字、さえ・ひで"],
            ["02:09", "歌詞...", "決め"]
        ];

        function toSeconds(timeStr) {
            const parts = timeStr.trim().split(':').reverse();
            let s = parseInt(parts[0], 10) + (parseInt(parts[1], 10) * 60);
            if (parts[2]) s += (parseInt(parts[2], 10) * 3600);
            return s;
        }

        const dataWithSeconds = myData.map(d => ({
            seconds: toSeconds(d[0]),
            memo: d[2]
        }));

        let player;
        const body = document.body;
        const actionEl = document.getElementById('action-label');
        const nameEl = document.getElementById('name-label');

        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                videoId: 'lN17WxlwdTY',
                playerVars: { 'autoplay': 0, 'controls': 0 },
                events: { 'onReady': () => setInterval(updateMonitor, 200) }
            });
        }

        // 画面クリックで再生・停止
        function togglePlay() {
            const state = player.getPlayerState();
            if (state === 1) {
                player.pauseVideo();
            } else {
                player.playVideo();
                document.getElementById('status-msg').style.display = 'none';
            }
        }

        function updateMonitor() {
            const currentTime = player.getCurrentTime();
            let currentMemo = "";
            for (let i = 0; i < dataWithSeconds.length; i++) {
                const item = dataWithSeconds[i];
                const nextItem = dataWithSeconds[i + 1];
                if (currentTime >= item.seconds && (!nextItem || currentTime < nextItem.seconds)) {
                    currentMemo = item.memo;
                    break;
                }
            }

            if (currentMemo) {
                let parts = currentMemo.split(/[、]/);
                actionEl.innerText = parts[0] || "";
                nameEl.innerText = parts[1] || "";

                // 背景色の切り替えロジック
                body.className = ""; // 一旦リセット
                if (currentMemo.includes("大字")) body.classList.add("bg-red");
                else if (currentMemo.includes("色")) body.classList.add("bg-blue");
                else if (currentMemo.includes("文字")) body.classList.add("bg-green");
                else if (currentMemo.includes("スプレー")) body.classList.add("bg-orange");
                else body.classList.add("bg-purple");
            } else {
                body.className = "bg-black";
                actionEl.innerText = "（待機）";
                nameEl.innerText = "";
            }
        }
    </script>
</body>
</html>
